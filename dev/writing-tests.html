

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; OSATE 2.7.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="building-osate.html" />
    <link rel="prev" title="&lt;no title&gt;" href="../setup-development.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> OSATE
          

          
          </a>

          
            
            
              <div class="version">
                2.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul class="simple">
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OSATE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Writing Tests</p>
<p>We use a stylized way of writing tests based on the xtext testing framework. The
test class declaration must extend XtextTest and be annotated as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">`java</span>
<span class="pre">&#64;RunWith(XtextRunner)</span>
<span class="pre">&#64;InjectWith(Aadl2InjectorProvider)</span>
<span class="pre">class</span> <span class="pre">ModeTransitionsTest</span> <span class="pre">extends</span> <span class="pre">XtextTest</span> <span class="pre">{</span>
<span class="pre">`</span></code></p>
<p>It is important to use the <cite>Aadl2Injectorprovider</cite> and not the UI injector
provider as the UI injector requires the presence of files in an Eclipse
workspace.</p>
<p>## Provided Helper Classes</p>
<p>### Class TestHelper</p>
<p>This class provides access to the parser, linker, validator, etc. and can
process AADL strings and AADL files. It must be injected into the test class:</p>
<p><code class="docutils literal notranslate"><span class="pre">`java</span>
<span class="pre">&#64;Inject</span>
<span class="pre">TestHelper&lt;AadlPackage&gt;</span> <span class="pre">testHelper</span>
<span class="pre">`</span></code></p>
<p>### Class TestResourceSetHelper</p>
<p>This class provides a singleton resource set that can be reused across tests.
The resource set is initialized on creation with all contributed AADL property
sets and packages. It is mainly there for use in <cite>TestHelper</cite>. Note that each
call to <cite>getResourceSet()</cite> returns the same resource set but removes all
resources loaded since the previous call.</p>
<p>### Class AssertHelper</p>
<p>This class provides a couple of extension methods for working with the
<cite>FluentIssueCollection</cite> and to test scoping.</p>
<p>## Examples</p>
<p>There are a couple of examples that show how tests can be written:</p>
<ul class="simple">
<li><dl class="simple">
<dt>in <cite>org.osate.core.tests</cite></dt><dd><ul>
<li><p>[Issue277Test.xtend](<a class="reference external" href="https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue277Test.xtend">https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue277Test.xtend</a>)
This shows how to parse a string that contains AADL text and work with the
resulting AADL Package.</p></li>
<li><p>[Issue361Test.xtend](<a class="reference external" href="https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue361Test.xtend">https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue361Test.xtend</a>)
This test shows how to instantiate a component implementation and work with
the resulting instance model. Note that the instance model must be created
in the same resource set as the declarative AADL model.</p></li>
<li><p>[Issue1092Test.xtend](<a class="reference external" href="https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue1092Test.xtend">https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/issues/Issue1092Test.xtend</a>)
This test shows how to analyze issues reported during instantiation, see
method <cite>testUnmappedModes()</cite>.</p></li>
<li><p>[ModeTransitionsTest.xtend](<a class="reference external" href="https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/aadl2scopeprovider/ModeTransitionsTest.xtend">https://github.com/osate/osate2/blob/develop/core/org.osate.core.tests/src/org/osate/core/tests/aadl2scopeprovider/ModeTransitionsTest.xtend</a>)
This test shows how to get a fluent issue collection from an AADL string
and how to work with it.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>## Running tests</p>
<p>Tests can be run in the development environment using <cite>Run as…</cite> -&gt; <cite>JUnit
Plug-in Test</cite>. Running a plain JUnit tests does not work because the test
envoronment needs the eclipse plugin mechanism to load contributed AADL property
sets and packages.</p>
<p>In the tycho build, test plugins must run with the UI enabled because tests load
plugins that depend on UI plugins even if they don’t use the UI during the test.</p>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="building-osate.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../setup-development.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2020, Carnegie Mellon University
      <span class="lastupdated">
        Last updated on Apr 15, 2020.
      </span>

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>